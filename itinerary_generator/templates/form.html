<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Itinerary Generator</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body class="bg-light p-4">
  <div class="container">
    <h1 class="mb-4">Generate Trip Itinerary</h1>

    <form method="post" enctype="multipart/form-data">
      <div class="mb-3">
        <label for="trip_json" class="form-label">Trip JSON</label>
        <input type="file" class="form-control" name="trip_json" id="trip_json" required>
      </div>

      <div class="mb-3">
        <label for="template_html" class="form-label d-flex align-items-center">
          HTML Template
          <span 
            class="ms-2 text-muted" 
            data-bs-toggle="tooltip" 
            data-bs-placement="top" 
            title="Optional. If left blank, the default template will be used.">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
              <path d="M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1zM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8z"/>
              <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 .875-.252 1.02-.598l.088-.416c.066-.3.118-.428.288-.47l.451-.083.082-.38-1.837-.287.738-3.468z"/>
              <circle cx="8" cy="4.5" r="1"/>
            </svg>
          </span>
        </label>
        <input type="file" class="form-control" name="template_html" id="template_html">
      </div>

      <div class="mb-3">
        <label for="timezone" class="form-label d-flex align-items-center">
          Timezone
          <span 
            class="ms-2 text-muted" 
            data-bs-toggle="tooltip" 
            data-bs-placement="top" 
            title="Select the timezone you want to use for displaying times in your itinerary.">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
              <path d="M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1zM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8z"/>
              <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 .875-.252 1.02-.598l.088-.416c.066-.3.118-.428.288-.47l.451-.083.082-.38-1.837-.287.738-3.468z"/>
              <circle cx="8" cy="4.5" r="1"/>
            </svg>
          </span>
        </label>
        <select class="form-select" name="timezone" id="timezone">
          <option value="">Auto-detect from trip data or use system default</option>
          {% for tz in timezones %}
          <option value="{{ tz }}">{{ tz }}</option>
          {% endfor %}
        </select>
        <div class="form-text">Select your preferred timezone for displaying event times in the itinerary.</div>
      </div>

      <div class="form-check mb-3">
        <input class="form-check-input" type="checkbox" name="generate_pdf" id="generate_pdf">
        <label class="form-check-label" for="generate_pdf">Generate PDF</label>
      </div>

      <button type="submit" class="btn btn-primary">Generate</button>
    </form>

    <hr class="my-5"/>

    <h2 class="h5 mb-3">ðŸ“š Template Reference</h2>
    <div class="row">
      <!-- HTML Variables -->
      <div class="col-md-6 mb-4">
        <div class="card h-100">
          <div class="card-header bg-light">ðŸ§© Jinja2 Variables</div>
            <div class="card-body small">
              <code>&lbrace;&lbrace; trip_name &rbrace;&rbrace;</code><br>
              <code>&lbrace;&lbrace; start_date &rbrace;&rbrace;</code><br>
              <code>&lbrace;&lbrace; end_date &rbrace;&rbrace;</code><br>
              <code>&lbrace;&lbrace; trip_notes &#124; safe &rbrace;&rbrace;</code><br>
              <code>&lbrace;&lbrace; timezone &rbrace;&rbrace;</code><br><br>
              <code>&percnt;&percnt; for day in days &percnt;&percnt;</code><br>
              &nbsp;&nbsp;<code>&lbrace;&lbrace; day.date &rbrace;&rbrace;</code><br>
              &nbsp;&nbsp;<code>&lbrace;&lbrace; day.events &rbrace;&rbrace;</code><br>
              &nbsp;&nbsp;<code>&lbrace;&lbrace; day.lodging_banner &rbrace;&rbrace;</code><br>
              <code>&percnt;&percnt; endfor &percnt;&percnt;</code>
            </div>
        </div>
      </div>

      <!-- CSS Class Hooks -->
      <div class="col-md-6 mb-4">
        <div class="card h-100">
          <div class="card-header bg-light">ðŸŽ¨ CSS Class Hooks</div>
          <div class="card-body small">
            <p><code>.itinerary-day</code> â€” Wraps each day</p>
            <p><code>.event-row</code> â€” Transport, activity, check-in/out lines</p>
            <p><code>.lodging-note</code> â€” Lodging banner (between check-in/out)</p>
            <p><code>.summary-section</code> â€” Footer row for addresses + notes</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <hr class="my-5" />

<h2 class="h5 mb-3">ðŸ§ª Try It Out</h2>
<div class="alert alert-info small">
  You can download a ready-to-use <strong>sample JSON</strong> and <strong>template</strong> to experiment with the tool.
</div>

<div class="d-flex flex-wrap gap-2">
  <a class="btn btn-outline-secondary" href="/static/trip.sample.json" download>
    ðŸ“„ Download Sample trip.json
  </a>
  <a class="btn btn-outline-secondary" href="/static/template.sample.html" download>
    ðŸ§© Download Sample template.html
  </a>
</div>


  <script>
    const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');
    tooltipTriggerList.forEach(t => new bootstrap.Tooltip(t));
  </script>
</body>
</html>